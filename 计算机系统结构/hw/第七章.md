## 7.9

第一级cache的不命中率  110/3000 = 3.67%

第二级cache的局部不命中率 55/110 = 50%

第二级cache的全局不命中率 55/3000 = 1.83%

## 7.10

1. 平均访问时间= 命中时间+失效率*失效开销

   平均访问时间1-路 = 2+1.4%*80 = 3.12ns

   平均访问时间2-路 = 2\*(1+10%)+1.0%\*80 = 3.0ns

   直接映像的访问时间是两路组相联的1.04倍

2. CPU时间(直接映像) = IC(2.0\*2+1.2\*0.014*80) = 5.344IC

   CPU时间(两路组相联) = IC(2.0\*2*(1+10%)+1.2\*0.01\*80) = 5.36IC

   相对性能比 = 5.36/5.344 = 1.003，因此选择直接映像

## 7.11

平均访存时间(伪相联)=命中时间(伪相联)+失效率(2路)*失效开销(2路)

命中时间(伪相联) = 命中时间(1路)+失效率(1路)*1

平均访存时间(伪相联) = 命中时间(1路) + 失效率(1路)\*1 +失效率(2路)*失效开销(2路)

平均访存时间(2KB) = 1+0.098\*1+0.076\*50 = 4.898

平均访存时间(128KB) = 1+0.010\*1+0.007\*50 = 1.36

128KB的伪相联Cache快

## 7.14

- 写直达Cache
  - 读命中 直接读 不访问主存
  - 写命中 访问主存一次
  - 读失效 将主存的块调入cache 访问主存两次
  - 写失效 将要写的块调入cache 访问两次 再将修改的数据写入cache和主存 访问一次 共三次
  - 平均访存次数 = (71.3%\*0)+(23.8%\*1)+(3.8%\*2)+(1.3%\*3) = 0.35
  - 已用带宽 = 0.35\*10^9/10^9 = 35%
- 写回法Cache
  - 访问命中 不访问主存
  - 访问失效 有一个块被换出
    - 被替换的块没有被修改过 将主存中的块调入cache块中 访存两次
    - 被替换的块修改过 则先将修改的快写入主存 然后将主存的块调入cache 共四次访存
  - 平均访存次数 = 95%\*0+3.5%\*2 + 1.5%\*4 = 0.13
  - 已用带宽 = 0.13\*10^9/10^9 = 13%